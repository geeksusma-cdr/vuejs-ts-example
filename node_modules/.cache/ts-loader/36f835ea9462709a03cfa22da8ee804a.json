{"remainingRequest":"/Users/geeksusma/vuejs-ts-example/node_modules/ts-loader/index.js??ref--12-1!/Users/geeksusma/vuejs-ts-example/src/router.ts","dependencies":[{"path":"/Users/geeksusma/vuejs-ts-example/src/router.ts","mtime":1626092007821},{"path":"/Users/geeksusma/vuejs-ts-example/node_modules/cache-loader/dist/cjs.js","mtime":1625758098049},{"path":"/Users/geeksusma/vuejs-ts-example/node_modules/ts-loader/index.js","mtime":1625758098083}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlUm91dGVyLCBjcmVhdGVXZWJIaXN0b3J5IH0gZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCBIb21lIGZyb20gJy4vY29tcG9uZW50cy9Ib21lLnZ1ZSc7CmltcG9ydCBOZXdQb3N0IGZyb20gJy4vY29tcG9uZW50cy9OZXdQb3N0LnZ1ZSc7CmltcG9ydCBTaG93UG9zdCBmcm9tICcuL2NvbXBvbmVudHMvU2hvd1Bvc3QudnVlJzsKaW1wb3J0IEVkaXRQb3N0IGZyb20gJy4vY29tcG9uZW50cy9FZGl0UG9zdC52dWUnOwpleHBvcnQgZnVuY3Rpb24gcm91dGVyV2l0aFN0b3JlKHN0b3JlKSB7CiAgICBjb25zdCByb3V0ZXIgPSBjcmVhdGVSb3V0ZXIoewogICAgICAgIGhpc3Rvcnk6IGNyZWF0ZVdlYkhpc3RvcnkocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyA/ICcvdnVlanMtY29tcG9zaXRpb24tYXBpLWNvdXJzZScgOiB1bmRlZmluZWQpLAogICAgICAgIHJvdXRlczogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBwYXRoOiAnLycsCiAgICAgICAgICAgICAgICBjb21wb25lbnQ6IEhvbWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgcGF0aDogJy9wb3N0cy86aWQvZWRpdCcsCiAgICAgICAgICAgICAgICBjb21wb25lbnQ6IEVkaXRQb3N0LAogICAgICAgICAgICAgICAgbWV0YTogewogICAgICAgICAgICAgICAgICAgIHJlcXVpcmVzQXV0aDogdHJ1ZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBwYXRoOiAnL3Bvc3RzLzppZCcsCiAgICAgICAgICAgICAgICBjb21wb25lbnQ6IFNob3dQb3N0CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHBhdGg6ICcvcG9zdHMvbmV3JywKICAgICAgICAgICAgICAgIGNvbXBvbmVudDogTmV3UG9zdCwKICAgICAgICAgICAgICAgIG1ldGE6IHsKICAgICAgICAgICAgICAgICAgICByZXF1aXJlc0F1dGg6IHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIF0KICAgIH0pOwogICAgcm91dGVyLmJlZm9yZUVhY2goKHRvLCBmcm9tLCBuZXh0KSA9PiB7CiAgICAgICAgY29uc3QgYXV0aCA9ICEhc3RvcmUuZ2V0U3RhdGUoKS5hdXRob3JzLmN1cnJlbnRVc2VySWQ7CiAgICAgICAgaWYgKCF0by5tZXRhLnJlcXVpcmVzQXV0aCkgewogICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHRvLm1ldGEucmVxdWlyZXNBdXRoICYmIGF1dGgpIHsKICAgICAgICAgICAgbmV4dCgpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgbmV4dCh7CiAgICAgICAgICAgICAgICBwYXRoOiAnLycKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gcm91dGVyOwp9Cg=="},{"version":3,"file":"/Users/geeksusma/vuejs-ts-example/src/router.ts","sourceRoot":"","sources":["/Users/geeksusma/vuejs-ts-example/src/router.ts"],"names":[],"mappings":"AAAA,OAAO,EACL,YAAY,EACZ,gBAAgB,EACjB,MAAM,YAAY,CAAA;AAEnB,OAAO,IAAI,MAAM,uBAAuB,CAAA;AACxC,OAAO,OAAO,MAAM,0BAA0B,CAAA;AAC9C,OAAO,QAAQ,MAAM,2BAA2B,CAAA;AAChD,OAAO,QAAQ,MAAM,2BAA2B,CAAA;AAGhD,MAAM,UAAU,eAAe,CAAC,KAAY;IAC1C,MAAM,MAAM,GAAG,YAAY,CAAC;QAC1B,OAAO,EAAE,gBAAgB,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY,CAAC,CAAC,CAAC,+BAA+B,CAAC,CAAC,CAAC,SAAS,CAAC;QAC9G,MAAM,EAAE;YACN;gBACE,IAAI,EAAE,GAAG;gBACT,SAAS,EAAE,IAAI;aAChB;YACD;gBACE,IAAI,EAAE,iBAAiB;gBACvB,SAAS,EAAE,QAAQ;gBACnB,IAAI,EAAE;oBACJ,YAAY,EAAE,IAAI;iBACnB;aACF;YACD;gBACE,IAAI,EAAE,YAAY;gBAClB,SAAS,EAAE,QAAQ;aACpB;YACD;gBACE,IAAI,EAAE,YAAY;gBAClB,SAAS,EAAE,OAAO;gBAClB,IAAI,EAAE;oBACJ,YAAY,EAAE,IAAI;iBACnB;aACF;SACF;KACF,CAAC,CAAA;IAEF,MAAM,CAAC,UAAU,CAAC,CAAC,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE;QACnC,MAAM,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,aAAa,CAAA;QAErD,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY,EAAE;YACzB,IAAI,EAAE,CAAA;YACN,OAAM;SACP;QAED,IAAI,EAAE,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,EAAE;YAChC,IAAI,EAAE,CAAA;SACP;aAAM;YACL,IAAI,CAAC;gBACH,IAAI,EAAE,GAAG;aACV,CAAC,CAAA;SACH;IACH,CAAC,CAAC,CAAA;IAEF,OAAO,MAAM,CAAA;AACf,CAAC","sourcesContent":["import {\n  createRouter,\n  createWebHistory\n} from 'vue-router'\n\nimport Home from './components/Home.vue'\nimport NewPost from './components/NewPost.vue'\nimport ShowPost from './components/ShowPost.vue'\nimport EditPost from './components/EditPost.vue'\nimport { Store } from './store'\n\nexport function routerWithStore(store: Store) {\n  const router = createRouter({\n    history: createWebHistory(process.env.NODE_ENV === 'production' ? '/vuejs-composition-api-course' : undefined),\n    routes: [\n      {\n        path: '/',\n        component: Home\n      },\n      {\n        path: '/posts/:id/edit',\n        component: EditPost,\n        meta: {\n          requiresAuth: true\n        }\n      },\n      {\n        path: '/posts/:id',\n        component: ShowPost\n      },\n      {\n        path: '/posts/new',\n        component: NewPost,\n        meta: {\n          requiresAuth: true\n        }\n      }\n    ]\n  })\n\n  router.beforeEach((to, from, next) => {\n    const auth = !!store.getState().authors.currentUserId\n\n    if (!to.meta.requiresAuth) {\n      next()\n      return\n    }\n\n    if (to.meta.requiresAuth && auth) {\n      next()\n    } else {\n      next({\n        path: '/'\n      })\n    }\n  })\n\n  return router\n}"]}]}