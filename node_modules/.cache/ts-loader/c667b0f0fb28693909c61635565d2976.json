{"remainingRequest":"/Users/geeksusma/vuejs-ts-example/node_modules/ts-loader/index.js??ref--12-1!/Users/geeksusma/vuejs-ts-example/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/geeksusma/vuejs-ts-example/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/geeksusma/vuejs-ts-example/src/components/Timeline.vue?vue&type=script&lang=ts","dependencies":[{"path":"/Users/geeksusma/vuejs-ts-example/src/components/Timeline.vue","mtime":1626085757888},{"path":"/Users/geeksusma/vuejs-ts-example/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/geeksusma/vuejs-ts-example/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/geeksusma/vuejs-ts-example/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/geeksusma/vuejs-ts-example/node_modules/vue-loader-v16/dist/index.js","mtime":1624994108000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50LCByZWYsIGNvbXB1dGVkIH0gZnJvbSAndnVlJzsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gJy4uL3N0b3JlJzsKaW1wb3J0IFRpbWVsaW5lUG9zdCBmcm9tICcuL1RpbWVsaW5lUG9zdC52dWUnOwpleHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoewogICAgbmFtZTogJ1RpbWVsaW5lJywKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBUaW1lbGluZVBvc3QKICAgIH0sCiAgICBhc3luYyBzZXR1cCgpIHsKICAgICAgICBjb25zdCBwZXJpb2RzID0gWydUb2RheScsICdUaGlzIFdlZWsnLCAnVGhpcyBNb250aCddOwogICAgICAgIGNvbnN0IGN1cnJlbnRQZXJpb2QgPSByZWYoJ1RvZGF5Jyk7CiAgICAgICAgY29uc3Qgc3RvcmUgPSB1c2VTdG9yZSgpOwogICAgICAgIGlmICghc3RvcmUuZ2V0U3RhdGUoKS5wb3N0cy5sb2FkZWQpIHsKICAgICAgICAgICAgYXdhaXQgc3RvcmUuZmV0Y2hQb3N0cygpOwogICAgICAgIH0KICAgICAgICBjb25zdCBhbGxQb3N0cyA9IHN0b3JlLmdldFN0YXRlKCkucG9zdHMuaWRzLnJlZHVjZSgoYWNjLCBpZCkgPT4gewogICAgICAgICAgICBjb25zdCB0aGVQb3N0ID0gc3RvcmUuZ2V0U3RhdGUoKS5wb3N0cy5hbGwuZ2V0KGlkKTsKICAgICAgICAgICAgaWYgKCF0aGVQb3N0KSB7CiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcignVGhpcyBwb3N0IHdhcyBub3QgZm91bmQnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gYWNjLmNvbmNhdCh0aGVQb3N0KTsKICAgICAgICB9LCBbXSk7CiAgICAgICAgY29uc3QgcG9zdHMgPSBjb21wdXRlZCgoKSA9PiB7CiAgICAgICAgICAgIHJldHVybiBhbGxQb3N0cy5maWx0ZXIocG9zdCA9PiB7CiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFBlcmlvZC52YWx1ZSA9PT0gJ1RvZGF5JykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBwb3N0LmNyZWF0ZWQuaXNBZnRlcihtb21lbnQoKS5zdWJ0cmFjdCgxLCAnZGF5JykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRQZXJpb2QudmFsdWUgPT09ICdUaGlzIFdlZWsnKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBvc3QuY3JlYXRlZC5pc0FmdGVyKG1vbWVudCgpLnN1YnRyYWN0KDEsICd3ZWVrJykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRQZXJpb2QudmFsdWUgPT09ICdUaGlzIE1vbnRoJykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBwb3N0LmNyZWF0ZWQuaXNBZnRlcihtb21lbnQoKS5zdWJ0cmFjdCgxLCAnbW9udGgnKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIGNvbnN0IHNldFBlcmlvZCA9IChwZXJpb2QpID0+IHsKICAgICAgICAgICAgY3VycmVudFBlcmlvZC52YWx1ZSA9IHBlcmlvZDsKICAgICAgICB9OwogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHBvc3RzLAogICAgICAgICAgICBwZXJpb2RzLAogICAgICAgICAgICBzZXRQZXJpb2QsCiAgICAgICAgICAgIGN1cnJlbnRQZXJpb2QKICAgICAgICB9OwogICAgfQp9KTsK"},{"version":3,"file":"/Users/geeksusma/vuejs-ts-example/src/components/Timeline.vue.ts","sourceRoot":"","sources":["/Users/geeksusma/vuejs-ts-example/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/geeksusma/vuejs-ts-example/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/geeksusma/vuejs-ts-example/src/components/Timeline.vue?vue&type=script&lang=ts"],"names":[],"mappings":"AACA,OAAO,EAAE,eAAe,EAAE,GAAG,EAAE,QAAQ,EAAE,MAAM,KAAK,CAAC;AACrD,OAAO,MAAM,MAAM,QAAQ,CAAA;AAE3B,OAAO,EAAE,QAAQ,EAAE,MAAM,UAAU,CAAA;AACnC,OAAO,YAAY,MAAM,oBAAoB,CAAA;AAE7C,eAAe,eAAe,CAAC;IAC7B,IAAI,EAAE,UAAU;IAChB,UAAU,EAAE;QACV,YAAY;KACb;IACD,KAAK,CAAC,KAAK;QACT,MAAM,OAAO,GAAa,CAAC,OAAO,EAAE,WAAW,EAAE,YAAY,CAAC,CAAA;QAC9D,MAAM,aAAa,GAAG,GAAG,CAAS,OAAO,CAAC,CAAA;QAC1C,MAAM,KAAK,GAAG,QAAQ,EAAE,CAAA;QACxB,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE;YAClC,MAAM,KAAK,CAAC,UAAU,EAAE,CAAA;SACzB;QACD,MAAM,QAAQ,GAAW,KAAK,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAS,CAAC,GAAG,EAAE,EAAE,EAAE,EAAE;YAC7E,MAAM,OAAO,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,CAAA;YAClD,IAAI,CAAC,OAAO,EAAE;gBACZ,MAAM,KAAK,CAAC,yBAAyB,CAAC,CAAA;aACvC;YACD,OAAO,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,CAAA;QAC5B,CAAC,EAAE,EAAE,CAAC,CAAA;QACN,MAAM,KAAK,GAAG,QAAQ,CAAC,GAAG,EAAE;YAC1B,OAAO,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;gBAC5B,IAAI,aAAa,CAAC,KAAK,KAAK,OAAO,EAAE;oBACnC,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAA;iBACzD;gBACD,IAAI,aAAa,CAAC,KAAK,KAAK,WAAW,EAAE;oBACvC,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAA;iBAC1D;gBACD,IAAI,aAAa,CAAC,KAAK,KAAK,YAAY,EAAE;oBACxC,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAA;iBAC3D;gBACD,OAAO,KAAK,CAAA;YACd,CAAC,CAAC,CAAA;QACJ,CAAC,CAAC,CAAA;QACF,MAAM,SAAS,GAAG,CAAC,MAAc,EAAE,EAAE;YACnC,aAAa,CAAC,KAAK,GAAG,MAAM,CAAA;QAC9B,CAAC,CAAA;QACD,OAAO;YACL,KAAK;YACL,OAAO;YACP,SAAS;YACT,aAAa;SACd,CAAA;IACH,CAAC;CACF,CAAC,CAAC","sourcesContent":["\nimport { defineComponent, ref, computed } from 'vue';\nimport moment from 'moment'\nimport { today, thisWeek, thisMonth, Post } from '../mocks'\nimport { useStore } from '../store'\nimport TimelinePost from './TimelinePost.vue'\ntype Period = 'Today' | 'This Week' | 'This Month'\nexport default defineComponent({\n  name: 'Timeline',\n  components: {\n    TimelinePost\n  },\n  async setup() {\n    const periods: Period[] = ['Today', 'This Week', 'This Month']\n    const currentPeriod = ref<Period>('Today')\n    const store = useStore()\n    if (!store.getState().posts.loaded) {\n      await store.fetchPosts()\n    }\n    const allPosts: Post[] = store.getState().posts.ids.reduce<Post[]>((acc, id) => {\n      const thePost = store.getState().posts.all.get(id)\n      if (!thePost) {\n        throw Error('This post was not found')\n      }\n      return acc.concat(thePost)\n    }, [])\n    const posts = computed(() => {\n      return allPosts.filter(post => {\n        if (currentPeriod.value === 'Today') {\n          return post.created.isAfter(moment().subtract(1, 'day'))\n        }\n        if (currentPeriod.value === 'This Week') {\n          return post.created.isAfter(moment().subtract(1, 'week'))\n        }\n        if (currentPeriod.value === 'This Month') {\n          return post.created.isAfter(moment().subtract(1, 'month'))\n        }\n        return false\n      })\n    })\n    const setPeriod = (period: Period) => {\n      currentPeriod.value = period\n    }\n    return {\n      posts,\n      periods,\n      setPeriod,\n      currentPeriod\n    }\n  }\n});\n"]}]}